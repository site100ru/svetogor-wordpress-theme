!function(){"use strict";let e="6LdV1IcUAAAAADRQAhpGL8dVj5_t0nZDPh9m_0tn";function t(t){return grecaptcha.execute(e,{action:t})}function n(){let e=document.getElementById("custom-contact-form");e&&!e.hasAttribute("data-recaptcha-initialized")&&function e(n){n.setAttribute("data-recaptcha-initialized","true");let c=document.getElementById("submit-btn"),d=c.querySelector(".btn-text"),p=c.querySelector(".btn-spinner"),m=document.getElementById("form-messages");if(r(n),a(n),!n.querySelector('input[name="g-recaptcha-response"]')){let f=document.createElement("input");f.type="hidden",f.name="g-recaptcha-response",f.id="g-recaptcha-response-custom",n.appendChild(f)}n.addEventListener("submit",function(e){e.preventDefault(),s(m),o(n),function e(t){let n=!0,r=t.querySelector('input[name="your-name"]');r.value.trim()||(i(r),n=!1);let a=t.querySelector('input[name="your-phone"]');a.value.trim()&&/^[\+]?[1-9][\d]{0,15}$/.test(a.value.replace(/[\s\-\(\)]/g,""))||(i(a),n=!1);let c=t.querySelector('input[name="your-email"]');return c.value.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.value)||(i(c),n=!1),n}(n)&&(l(c,d,p,!0),t("submit_custom_contact_form").then(function(e){let t=n.querySelector('input[name="g-recaptcha-response"]');t&&(t.value=e);let r=new FormData(n);return r.append("action","submit_custom_contact_form"),r.append("nonce",customForm.nonce),fetch(customForm.ajaxUrl,{method:"POST",body:r})}).then(e=>e.json()).then(e=>{l(c,d,p,!1),e.success?(u(m,e.data.message||"Спасибо! Ваша заявка отправлена. Мы свяжемся с вами в ближайшее время.","success"),function e(t,n){t.reset(),t.querySelectorAll('.image-checkbox-container input[type="checkbox"]').forEach(e=>{e.checked=!1});let r=t.querySelector(".file-name");r&&(r.textContent="Файл не прикреплен"),o(t)}(n,m)):u(m,e.data||"Произошла ошибка при отправке. Попробуйте еще раз.","danger")}).catch(e=>{l(c,d,p,!1),u(m,"Произошла ошибка при отправке. Попробуйте еще раз.","danger"),console.error("Ошибка отправки формы:",e)}))})}(e);let n=document.getElementById("extended-contact-form");n&&!n.hasAttribute("data-recaptcha-initialized")&&function e(n){n.setAttribute("data-recaptcha-initialized","true");let d=document.getElementById("extended-submit-btn"),p=d.querySelector(".btn-text"),m=d.querySelector(".btn-spinner"),f=document.getElementById("extended-form-messages");if(r(n),a(n),function e(t){let n=t.querySelectorAll(".image-checkbox-container");n.forEach(e=>{let t=e.querySelector('input[type="checkbox"]');t&&(e.addEventListener("click",function(n){n.target!==t&&(n.preventDefault(),t.checked=!t.checked,c(e,t))}),t.addEventListener("change",function(){c(e,t)}),c(e,t))});let r=t.querySelectorAll(".custom-checkbox-container");r.forEach(e=>{let t=e.querySelector('input[type="checkbox"]');t&&(e.addEventListener("click",function(n){n.target!==t&&(n.preventDefault(),t.checked=!t.checked,c(e,t))}),t.addEventListener("change",function(){c(e,t)}),c(e,t))})}(n),!n.querySelector('input[name="g-recaptcha-response"]')){let h=document.createElement("input");h.type="hidden",h.name="g-recaptcha-response",h.id="g-recaptcha-response-extended",n.appendChild(h)}n.addEventListener("submit",function(e){e.preventDefault(),s(f),o(n),function e(t){let n=!0,r=t.querySelector('input[name="your-name"]');r.value.trim()||(i(r),n=!1);let a=t.querySelector('input[name="your-phone"]');a.value.trim()&&/^[\+]?[1-9][\d]{0,15}$/.test(a.value.replace(/[\s\-\(\)]/g,""))||(i(a),n=!1);let c=t.querySelector('input[name="your-email"]');c.value.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.value)||(i(c),n=!1);let o=t.querySelector('select[name="product-type"]');return o&&!o.value&&(i(o),n=!1),n}(n)&&(l(d,p,m,!0),t("submit_extended_contact_form").then(function(e){let t=n.querySelector('input[name="g-recaptcha-response"]');t&&(t.value=e);let r=new FormData(n);return r.append("action","submit_extended_contact_form"),r.append("nonce",extendedForm.nonce),fetch(extendedForm.ajaxUrl,{method:"POST",body:r})}).then(e=>e.json()).then(e=>{l(d,p,m,!1),e.success?(u(f,e.data.message||"Спасибо! Ваша заявка отправлена. Мы свяжемся с вами в ближайшее время.","success"),function e(t,n){t.reset(),t.querySelectorAll(".image-checkbox-container, .custom-checkbox-container").forEach(e=>{e.classList.remove("active")});let r=t.querySelector(".file-name");r&&(r.textContent="Файл не прикреплен"),o(t)}(n,f)):u(f,e.data||"Произошла ошибка при отправке. Попробуйте еще раз.","danger")}).catch(e=>{l(d,p,m,!1),u(f,"Произошла ошибка при отправке. Попробуйте еще раз.","danger"),console.error("Ошибка отправки формы:",e)}))})}(n)}function r(e){let t=e.querySelector('input[name="page-url"]'),n=e.querySelector('input[name="page-title"]'),r=e.querySelector('input[name="referrer"]'),a=e.querySelector('input[name="user-agent"]');t&&(t.value=window.location.href),n&&(n.value=document.title),r&&(r.value=document.referrer||""),a&&(a.value=navigator.userAgent)}function a(e){let t=e.querySelector(".file-upload"),n=e.querySelector(".file-name");t&&n&&t.addEventListener("change",function(t){if(t.target.files&&t.target.files.length>0){let r=t.target.files[0];if(r.size>5242880){let a=e.querySelector("#form-messages, #extended-form-messages");u(a,"Размер файла не должен превышать 5MB","danger"),this.value="",n.textContent="Файл не прикреплен";return}n.textContent=r.name}else n.textContent="Файл не прикреплен"})}function c(e,t){t.checked?e.classList.add("active"):e.classList.remove("active")}function i(e){e.classList.add("is-invalid");let t=function(){e.classList.remove("is-invalid")};e.addEventListener("input",t,{once:!0}),"SELECT"===e.tagName&&e.addEventListener("change",t,{once:!0})}function o(e){e.querySelectorAll(".is-invalid").forEach(e=>{e.classList.remove("is-invalid")})}function l(e,t,n,r){r?(e.disabled=!0,t&&(t.style.display="none"),n&&(n.style.display="inline-block")):(e.disabled=!1,t&&(t.style.display="inline-block"),n&&(n.style.display="none"))}function u(e,t,n){e&&(e.innerHTML=`<div class="alert alert-${n}">${t}</div>`,e.scrollIntoView({behavior:"smooth",block:"nearest"}))}function s(e){e&&(e.innerHTML="")}document.addEventListener("DOMContentLoaded",function(){new Promise((t,n)=>{if("undefined"!=typeof grecaptcha&&grecaptcha.ready){t();return}let r=document.createElement("script");r.src=`https://www.google.com/recaptcha/api.js?render=${e}`,r.async=!0,r.defer=!0,r.onload=function(){grecaptcha.ready(function(){t()})},r.onerror=function(){n(Error("Ошибка загрузки reCAPTCHA API"))},document.head.appendChild(r)}).then(()=>{n()}).catch(e=>{console.error("Ошибка загрузки reCAPTCHA:",e),n()})})}();